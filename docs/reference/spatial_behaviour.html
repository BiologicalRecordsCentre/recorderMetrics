<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate spatial metrics — spatial_behaviour • recorderMetrics</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Calculate spatial metrics — spatial_behaviour" />

<meta property="og:description" content="This function takes in data for a recorder and calculates the spatial metrics. Note that the spatial projection of the data allows for estimates of distance in meters. Pay particular attention to the specification or the parameters crs and new_crs" />
<meta name="twitter:card" content="summary" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">recorderMetrics</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate spatial metrics</h1>
    
    </div>

    
    <p>This function takes in data for a recorder and calculates the spatial metrics. Note that the spatial projection of the data allows for estimates of distance in meters. Pay particular attention to the specification or the parameters <code>crs</code> and <code>new_crs</code></p>
    

    <pre class="usage"><span class='fu'>spatial_behaviour</span>(<span class='no'>recorder_name</span>, <span class='no'>data</span>, <span class='no'>y_col</span>, <span class='no'>x_col</span>, <span class='no'>crs</span>, <span class='no'>new_crs</span>,
  <span class='kw'>recorder_col</span> <span class='kw'>=</span> <span class='st'>"recorders"</span>, <span class='kw'>upper_percentile</span> <span class='kw'>=</span> <span class='fl'>95</span>,
  <span class='kw'>lower_percentile</span> <span class='kw'>=</span> <span class='fl'>60</span>, <span class='kw'>h</span> <span class='kw'>=</span> <span class='fl'>5000</span>, <span class='kw'>res</span> <span class='kw'>=</span> <span class='fl'>1000</span>, <span class='kw'>threshold</span> <span class='kw'>=</span> <span class='fl'>5</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>recorder_name</th>
      <td><p>the name of the recorder for whom you want to calculate the metrics</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>the data.frame of recording information</p></td>
    </tr>
    <tr>
      <th>y_col</th>
      <td><p>the name of the column that contains the y coordinate (e.g. latitude) of the observation. This should be a numeric.</p></td>
    </tr>
    <tr>
      <th>x_col</th>
      <td><p>the name of the column that contains the x coordinate (e.g. longitude)  of the observation. This should be a numeric.</p></td>
    </tr>
    <tr>
      <th>crs</th>
      <td><p>the proj4 string that describes the projection your data are using. For GPS lat long this is "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs". You can find more at <a href='http://spatialreference.org/'>http://spatialreference.org/</a></p></td>
    </tr>
    <tr>
      <th>new_crs</th>
      <td><p>the proj4 string that the decribes the coordinate system your data should be reproject to. THIS IS IMPORTANT. Your data must be on a projection that has units in meters so that results are comparable to other studies. An appropriate system in the UK is the UK national grid "+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs". If your orignal crs (given in the arguement <code>crs</code>), already has untis in meters then set <code>new_crs = NULL</code>. WARNING: if you set this to NULL but your coordinate system is not in units of meters you will likely have errors.</p></td>
    </tr>
    <tr>
      <th>recorder_col</th>
      <td><p>the name of the column that contains the recorder names</p></td>
    </tr>
    <tr>
      <th>upper_percentile</th>
      <td><p>The percentile used to create a polygon that encapsulates a proportion of the recorders observations using the kernel method (<code><a href='http://www.rdocumentation.org/packages/adehabitatHR/topics/kernelUD'>?adehabitatHR::kernelUD</a></code>). This is used to estimate the area covered as will as the ratio of core to total area covered, see <code>Value</code>.</p></td>
    </tr>
    <tr>
      <th>lower_percentile</th>
      <td><p>see <code>upper_percentile</code></p></td>
    </tr>
    <tr>
      <th>h</th>
      <td><p>a numeric smoothing parameter for drawing the kernels. See <code><a href='http://www.rdocumentation.org/packages/adehabitatHR/topics/kernelUD'>?adehabitatHR::kernelUD</a></code> for details.</p></td>
    </tr>
    <tr>
      <th>res</th>
      <td><p>a numeric giving the resolution for kernel estimation.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>If there are less than this number of observations NA values witll be returned for the metrics. Default is 5</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data.frame with seven columns</p><ul>
<li><p><code>recorder</code> - The name of the recorder, as given in the recorder_name argument</p></li>
<li><p><code>spPoint</code> - The observation points as a SpatialPoints object</p></li>
<li><p><code>poly_upper</code> - A SpatialPolygonsDataFrame object giving the are containing the upper_percentile percentage of records using the kernel method</p></li>
<li><p><code>poly_lower</code> - A SpatialPolygonsDataFrame object giving the are containing the lower_percentile percentage of records using the kernel method</p></li>
<li><p><code>upper_n_poly</code> - The number of polygons that make up <code>poly_upper</code></p></li>
<li><p><code>lower_n_poly</code> - The number of polygons that make up <code>poly_lower</code></p></li>
<li><p><code>upper_area</code> - The area of the polygons that make up <code>poly_upper</code> in km squared</p></li>
<li><p><code>lower_area</code> - The area of the polygons that make up <code>poly_upper</code> in km squared</p></li>
<li><p><code>ratio</code> - The ratio of <code>lower_area</code> to <code>upper_area</code> calculated as <code>lower_area/upper_area</code></p></li>
<li><p><code>n</code> - The total number of observations made by this recorder</p></li>
</ul>

    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'># load example data</span>
<span class='fu'>head</span>(<span class='no'>cit_sci_data</span>)

<span class='co'># Run for one recorder using the UK grid</span>

<span class='co'>## get the proj4 strings from http://spatialreference.org</span>
<span class='co'># current form is lat long</span>
<span class='no'>WGS_84</span> <span class='kw'>&lt;-</span> <span class='st'>"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"</span>
<span class='co'># I want to change to UK national grid as that is in meters</span>
<span class='no'>UKNG</span> <span class='kw'>&lt;-</span> <span class='st'>"+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs"</span>

<span class='no'>SB</span> <span class='kw'>&lt;-</span> <span class='fu'>spatial_behaviour</span>(<span class='kw'>recorder_name</span> <span class='kw'>=</span> <span class='fl'>3007</span>,
                       <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>cit_sci_data</span>,
                       <span class='kw'>crs</span> <span class='kw'>=</span> <span class='no'>WGS_84</span>,
                       <span class='kw'>new_crs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
                       <span class='kw'>y_col</span> <span class='kw'>=</span> <span class='st'>'lat'</span>,
                       <span class='kw'>x_col</span> <span class='kw'>=</span> <span class='st'>'long'</span>,
                       <span class='kw'>recorder_col</span> <span class='kw'>=</span> <span class='st'>'recorder'</span>)

<span class='no'>SB</span>
<span class='fu'>plot</span>(<span class='no'>SB</span>$<span class='no'>poly_upper</span>)

<span class='co'># Run for more than one recorder, this can be slow </span>
<span class='no'>SB_all</span> <span class='kw'>&lt;-</span> <span class='fu'>lapply</span>(<span class='fu'>unique</span>(<span class='no'>cit_sci_data</span>$<span class='no'>recorder</span>)[<span class='fl'>1</span>:<span class='fl'>10</span>],
                <span class='kw'>FUN</span> <span class='kw'>=</span> <span class='no'>spatial_behaviour</span>,
                <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>cit_sci_data</span>,
                <span class='kw'>crs</span> <span class='kw'>=</span> <span class='no'>WGS_84</span>,
                <span class='kw'>new_crs</span> <span class='kw'>=</span> <span class='no'>UKNG</span>,
                <span class='kw'>y_col</span> <span class='kw'>=</span> <span class='st'>'lat'</span>,
                <span class='kw'>x_col</span> <span class='kw'>=</span> <span class='st'>'long'</span>,
                <span class='kw'>recorder_col</span> <span class='kw'>=</span> <span class='st'>'recorder'</span>)

<span class='co'># summarise as one table</span>
<span class='no'>SB_all_sum</span> <span class='kw'>&lt;-</span> <span class='fu'>do.call</span>(<span class='no'>rbind</span>, <span class='no'>SB_all</span>)

<span class='no'>SB_all_sum</span>
<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Tom August, Michael Pocock.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

